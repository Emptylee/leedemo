<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1,maximum-scale=1">
	<title>测试fullpage可用并与jquery可连用</title>

	<style>
	body{
		padding: 0;
		margin: 0;
	}
	.page{width:100%;}
	.component{
		width:100px;
		height:100px;
		background:#222;
		display:none;
		/*要将这里设为none 后面的fadeIn fadeOut的效果才会出来*/
	}
	</style>

	<!--载入所有组件资源-->
	<script src="../js/lib/jquery.js"></script>
	<script src="../js/lib/jquery.fullPage.js"></script>
	<script src="../js/lib/jquery-ui.min.js"></script>

	<script>
	$(function(){
		$("#h5").fullpage({
			'sectionsColor':['red','yellow','blue'],
			onLeave:function(index,nextIndex,direction){
				$("#h5").find('.h5_page').eq(index-1).find(".page").eq(index-1).trigger('onleave');

			},
			afterLoad:function(anchorLink,index){
				$("#h5").find(".page").eq(index-1).trigger("onload");
			}
		});

		$(".page").on("onleave",function(){
			console.log($(this).attr('id'),'==>','onLeave');
			$(this).find('component').trigger('onleave');
		});
		$(".page").on("onload",function(){
			console.log($(this).attr('id'),'==>','onload');
			$(this).find('.component').trigger('onload');
		});
		$(".component").on("onload",function(){
			$(this).fadeIn();
			return false;//这里是因为onload函数名字一样 这样的话.component发生onload事件时会向上传，传给page 为了阻止向上传
		});
		$(".component").on("onleave",function(){
			$(this).fadeOut();
			return false;//
		});
	});
	</script>
</head>
<body>
	<div id="h5">
		<div class="page section" id="page-1">
			<div class="component logo">logo</div>
			<div class="component slogan">slogan</div>
		</div>
		<div class="page section" id="page-2">
			<div class="component desc">信息描述</div>
		</div>
		<div class="page section" id="page-3">
			<div class="component bar">柱状图</div>
		</div>
	</div>
</body>
</html>